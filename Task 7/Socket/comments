; Q: Почему можно использовать connect() для UDP?
; A: connect() в UDP не устанавливает соединение, а просто фиксирует адрес получателя (см справку по функции).
; Поэтому можно использоавать send и recv вместо sendto и recvfrom.

; Q: В чем тогда разница TCP или UDP по коду?
; A: listen() и accept() используются только в TCP (применяются только к типам сокетов SOCK_STREAM и SOCK_SEQPACKET).
; В контексте UDP connect() не создаёт соединение, а просто привязывает сокет к определённому адресу.

; Q: Иногда при повторном запуске программы bind fail.
; A: При помощи strace выяснили, что address already in use -> connection refused.
; Оказалось, сокет проходит через состояние TIME_WAIT (примерно 60 секунд).
; Сервер закрывает соединение, порт остается в состоянии TIME_WAIT для предотвращения
; конфликтов с пакетами от старых соединений. Добавили следующее решение:
    ; setsockopt(socket_fd, SOL_SOCKET, SO_REUSEADDR, &opt, sizeof(opt));
    ; SOL_SOCKET - уровень параметра. настраиваем свойства самого сокета.
    ; SO_REUSEADDR - повторно использовать адрес даже если состояние TIME_WAIT.
    ; opt = 1 - использовать